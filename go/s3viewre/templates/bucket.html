<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bucket: {{.BucketName}}</title>
    <link rel="stylesheet" href="/static/css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-top">
                <a href="/" class="btn btn-secondary">‚Üê „Éê„Ç±„ÉÉ„Éà‰∏ÄË¶ß„Å´Êàª„Çã</a>
                <h1>{{.BucketName}}</h1>
            </div>
        </header>

        <main>
            {{if .Error}}
            <div class="alert alert-error">
                <strong>„Ç®„É©„Éº„ÅåÁô∫Áîü„Åó„Åæ„Åó„ÅüÔºö</strong> {{.Error}}
            </div>
            {{end}}

            <!-- „Éë„É≥„Åè„Åö„É™„Çπ„Éà -->
            <div class="breadcrumb">
                {{range .Breadcrumbs}}
                    {{if eq .Path ""}}
                        <a href="/bucket/{{$.BucketName}}">{{.Name}}</a>
                    {{else}}
                        <a href="/bucket/{{$.BucketName}}?prefix={{.Path | urlquery}}">{{.Name}}</a>
                    {{end}}
                    <span class="separator">/</span>
                {{end}}
            </div>

            <!-- Ê§úÁ¥¢„Éú„ÉÉ„ÇØ„Çπ -->
            <div class="search-section">
                <form method="get" class="search-form">
                    <input type="hidden" name="prefix" value="{{.Prefix}}">
                    <input
                        type="text"
                        name="search"
                        placeholder="„Éï„Ç°„Ç§„É´Âêç„ÇÑ„Éï„Ç©„É´„ÉÄÂêç„ÅßÊ§úÁ¥¢..."
                        class="search-input"
                    >
                    <button type="submit" class="btn btn-primary">Ê§úÁ¥¢</button>
                </form>
            </div>

            <!-- „Ç™„Éñ„Ç∏„Çß„ÇØ„Éà‰∏ÄË¶ß -->
            <div class="objects-section">
                {{if .Objects}}
                <table class="objects-table">
                    <thead>
                        <tr>
                            <th>„Çø„Ç§„Éó</th>
                            <th>ÂêçÂâç</th>
                            <th>„Çµ„Ç§„Ç∫</th>
                            <th>ÊúÄÁµÇÊõ¥Êñ∞Êó•ÊôÇ</th>
                        </tr>
                    </thead>
                    <tbody>
                        {{range .Objects}}
                        <tr class="{{if .IsFolder}}folder-row{{else}}file-row{{end}}">
                            <td class="type-cell">
                                {{if .IsFolder}}
                                    <span class="type-icon folder-icon">üìÅ</span>
                                {{else}}
                                    <span class="type-icon file-icon">üìÑ</span>
                                {{end}}
                            </td>
                            <td class="name-cell">
                                {{if .IsFolder}}
                                    <a href="/bucket/{{$.BucketName}}?prefix={{.Key | urlquery}}">
                                        {{.Name}}
                                    </a>
                                {{else}}
                                    <a href="/object/{{$.BucketName}}/{{.Key | urlquery}}">
                                        {{.Name}}
                                    </a>
                                {{end}}
                            </td>
                            <td class="size-cell">
                                {{if .IsFolder}}
                                    -
                                {{else}}
                                    {{.Size}}B
                                {{end}}
                            </td>
                            <td class="date-cell">{{.LastModified}}</td>
                        </tr>
                        {{end}}
                    </tbody>
                </table>
                {{else}}
                <div class="alert alert-info">
                    „Ç™„Éñ„Ç∏„Çß„ÇØ„Éà„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì
                </div>
                {{end}}
            </div>
        </main>

        <footer>
            <p>&copy; 2025 S3 Bucket Viewer</p>
        </footer>
    </div>
</body>
</html>
